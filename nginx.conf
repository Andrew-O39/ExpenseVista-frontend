server {
  listen 80;
  server_name _;

  # Where Vite build output was copied
  root /usr/share/nginx/html;
  index index.html;

  # Serve static assets with long cache
  location ~* \.(?:js|mjs|css|woff2?|ttf|otf|eot|png|jpg|jpeg|gif|svg|webp|ico)$ {
    try_files $uri =404;
    access_log off;

    # 1 year cache, immutable (Vite hashes filenames)
    add_header Cache-Control "public, max-age=31536000, immutable";
  }

  # Let the app handle client-side routes (React Router)
  location / {
    try_files $uri $uri/ /index.html;
    # Don't cache index.html (so new deploys show up)
    add_header Cache-Control "no-store";
  }

  # Optional: tighten security headers (adjust if you add inline scripts/styles)
  add_header X-Content-Type-Options nosniff;
  add_header Referrer-Policy same-origin;
  add_header X-Frame-Options DENY;
  add_header X-XSS-Protection "1; mode=block";

  # Increase body size if you ever upload files
  client_max_body_size 10m;
}